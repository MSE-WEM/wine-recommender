%---Hyperref settings---------------------------------------------------------%

\documentclass[11pt,a4paper]{report}

\usepackage{fullpage}                  % Use full page
\usepackage[usegeometry]{typearea}     % before geometry!
\usepackage{geometry}
\geometry{
a4paper,
left=20mm,
right=20mm,
top=13mm,
bottom=25mm,
headsep=10mm,
headheight=-10mm,
footskip=22mm,
includefoot
}
\usepackage[french]{babel}             % Set language
\usepackage{cmbright}
\usepackage[T1]{fontenc}               % Needed when using french
\usepackage[utf8]{inputenc}            % Set to UTF-8
\usepackage{csquotes}                  % To quote some text
\usepackage{pdfpages}                  % To set PDF styles
\usepackage{hyperref}                  % To create hyperlinks in cross references
\usepackage{graphicx}                  % To insert images
\usepackage{color}                     % To create colored text and background
\usepackage{float}                     % To change image floating
\usepackage{url}                       % To refer to URLs
\usepackage{caption}                   % To add caption to tables
\usepackage{etoolbox}
\usepackage{titlesec}
\usepackage{lscape}
\usepackage{pdfpages}
\usepackage{pdflscape}
\usepackage{parskip}


%---Chapter and other settings------------------------------------------------%
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

\titleformat{\chapter}{\normalfont\huge}{\textbf\thechapter}{20pt}{\huge\textbf}
\titlespacing*{\chapter}{0pt}{0pt}{20pt}

\makeatletter
\patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{}{}{}
\makeatother

\newcommand*{\useportrait}{%
  \clearpage
  \KOMAoptions{paper=portrait,DIV=current}%switch to portrait
    \newgeometry{% geometry settings for portrait
    left=2cm, right=2cm, top=2cm, bottom=2cm, headsep=1mm,
    }%
  \fancyhfoffset{0pt}% <- recalculate head and foot width for fancyhdr
}
\newcommand*{\uselandscape}{%
  \clearpage
  \KOMAoptions{paper=landscape,DIV=current}%switch to landscape
    \newgeometry{% geometry settings for portrait
        left=2cm, right=2cm, top=3cm, bottom=0.5cm, includefoot
    }%
  \fancyhfoffset{0pt}% recalculate head and foot width for fancyhdr
}


\definecolor{mygreen}{rgb}{0.80784, 0.89412, 0.59608}


%---Maketitle metadata--------------------------------------------------------%

\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} 	% Horizontal rule

%---Custom commands-----------------------------------------------------------%

\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}}

%---Custom headers/footers (fancyhdr package)---------------------------------%

\usepackage{fancyhdr}
\pagestyle{fancyplain}
\fancyhead[L]{\setlength{\unitlength}{1mm}
\begin{picture}(0,0)
\put(-7,-4.5){\includegraphics[width=5cm]{rsc/mse_logo.png}}
\end{picture}}
\fancyhead[C]{Rapport - Projet - WEM}
\fancyhead[R]{\setlength{\unitlength}{1mm}
\begin{picture}(0,0)
\put(-29,-3.5){\includegraphics[width=3cm]{rsc/hes_logo.png}}
\end{picture}}
\fancyfoot[C]{\begin{picture}(0,0)
        \put(0,30){\thepage}
\end{picture}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\setlength{\headheight}{13.6pt}

\begin{document}

%---Hyperref settings---------------------------------------------------------%

\hypersetup{pdfauthor={Andrea Petrucci, Benjamin Pasquier, Laurent Hirschi},
            pdftitle=Cahier des charges - Web Mining - Wine Recommender,
            pdfsubject=IT}

%---Title---------------------------------------------------------------------%

\title{
        \includegraphics[width=10cm]{rsc/mse_logo.png} \\
        
        \horrule{2pt} \\[0.4cm]
        \huge{\textbf{Cahier des charges - WEM - Wine Recommender}}\\
        \horrule{1pt} \\[0.5cm]
        Master MSE
        \horrule{2pt} \\[0.5cm]
        }
\author{Rédigé par: \textbf{Andrea Petrucci, Benjamin Pasquier, Laurent Hirschi} \vspace{2mm} \\
                    \textbf{Groupe D} \vspace{5mm} \\
        Supervisé par: Dr. Laura Elena Raileanu \vspace{2mm} \\
        Assistants: Elena Najdenovska et Cédric Campos Carvalho \vspace{5mm} \\
        Version: 1.0}
\date{\today}
\maketitle

%---Versions table------------------------------------------------------------%

\chapter*{Table des versions}
\pagenumbering{gobble}
        \begin{table}[H]
        \begin{tabular}{|p{2cm}|p{14.1cm}|}
        \hline
        \textbf{Version} & \textbf{Description} \\ \hline
        1.0 & Version initiale \\  \hline  
        \end{tabular}
\end{table}

%---Contents------------------------------------------------------------------%

\addtocontents{toc}{\protect
\pagenumbering{gobble}}
\tableofcontents
\newpage

%---Figures-------------------------------------------------------------------%

\addtocontents{toc}{\protect
\pagenumbering{gobble}}
\listoffigures
\newpage

%---Chapters------------------------------------------------------------------%

\chapter{Contexte et objectifs}
\pagenumbering{arabic}
\input{rsc/contexte_objectifs}
\newpage

\chapter{Données}
\input{rsc/donnees}
\newpage

\chapter{Technologies et méthodes}
\input{rsc/technologies}
\vspace{10mm}
\newpage

%\uselandscape
  \chapter{Planning}
  \input{rsc/planning}
%\useportrait
\newpage

\chapter{Résultats attendus et risques}
\input{rsc/resultats}
\newpage

%---Bibliography--------------------------------------------------------------%
%\bibliographystyle{ieeetr}
%\bibliography{bibliography/resources.bib}
%\addcontentsline{toc}{chapter}{Bibliographie}

\end{document}
